{"mappings":"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","sources":["<anon>","src/scripts/main.js","src/scripts/domFunctions.js","src/scripts/helpers.js","src/scripts/moveFunctions.js"],"sourcesContent":["const $3a2eb4aa4a7e4dba$export$cb0dffe2d2ae675a = (gridSize)=>Math.floor(Math.random() * gridSize);\nconst $3a2eb4aa4a7e4dba$export$5bb0c5338e04ae49 = (array, y)=>array.reduce((acc, curr, i)=>{\n        acc[Math.floor(y ? i % acc.length : i / acc.length)].push(curr);\n        return acc;\n    }, [\n        [],\n        [],\n        [],\n        []\n    ]);\nconst $3a2eb4aa4a7e4dba$export$978e30a0fb8610d8 = (cells)=>{\n    return $3a2eb4aa4a7e4dba$export$5bb0c5338e04ae49([\n        ...cells\n    ], true);\n};\nconst $3a2eb4aa4a7e4dba$export$e7a6db342d2fdde5 = (cells)=>{\n    return $3a2eb4aa4a7e4dba$export$5bb0c5338e04ae49([\n        ...cells\n    ]);\n};\nconst $3a2eb4aa4a7e4dba$export$c5f308e28dbb0701 = (cells)=>[\n        ...cells\n    ].reduce((acc, curr)=>+curr.textContent > 2 ? acc + +curr.textContent : acc + 0, 0);\nconst $3a2eb4aa4a7e4dba$export$bca45dff2862a24 = (currentCells, newCells)=>[\n        ...currentCells\n    ].some((cell, i)=>!cell.isEqualNode(newCells.flat()[i]));\nconst $3a2eb4aa4a7e4dba$export$eafad6f4e37c0fbb = (cells)=>[\n        ...cells\n    ].some((cell)=>cell.textContent === \"\");\nconst $3a2eb4aa4a7e4dba$var$isMergePossible = (cells)=>{\n    const rowsAndColumns = [\n        ...$3a2eb4aa4a7e4dba$export$e7a6db342d2fdde5(cells),\n        ...$3a2eb4aa4a7e4dba$export$978e30a0fb8610d8(cells)\n    ];\n    for (const subArr of rowsAndColumns)for(let i = 0; i < subArr.length; i++){\n        if (subArr[i].isEqualNode(subArr[i + 1])) return true;\n    }\n};\nconst $3a2eb4aa4a7e4dba$export$9f1c65284a10fd65 = (cells)=>{\n    if (!$3a2eb4aa4a7e4dba$export$eafad6f4e37c0fbb(cells)) return !$3a2eb4aa4a7e4dba$var$isMergePossible(cells);\n    return false;\n};\nconst $3a2eb4aa4a7e4dba$export$1ab4082fb43308c8 = (cells)=>[\n        ...cells\n    ].some((cell)=>+cell.textContent === 2048);\n\n\n\nconst $bb3973b59a235a1d$export$bc90872e265d166e = 4;\nconst $bb3973b59a235a1d$var$removeModifierClass = (domNode)=>{\n    const classModifier = domNode.classList.item(1);\n    if (classModifier) domNode.classList.remove(classModifier);\n};\nconst $bb3973b59a235a1d$export$4c9cc8a8bb2b3fc2 = (cell, value)=>{\n    $bb3973b59a235a1d$var$removeModifierClass(cell);\n    cell.textContent = value;\n    cell.classList.add(`field-cell--${value}`);\n};\nconst $bb3973b59a235a1d$export$492548937fe95318 = ()=>{\n    [\n        ...(0, $ac43a74d429af77f$export$57ba6370ea0e47f8)\n    ].forEach((cell)=>{\n        cell.textContent = null;\n        $bb3973b59a235a1d$var$removeModifierClass(cell);\n    });\n};\nconst $bb3973b59a235a1d$export$d8dd757b458444ef = ()=>{\n    const cell = document.createElement(\"td\");\n    cell.classList.add(\"field-cell\");\n    return cell;\n};\nconst $bb3973b59a235a1d$export$f83aa6f92f268972 = ()=>{\n    const randomCell = (0, $ac43a74d429af77f$export$2dd197b55cf13440)[(0, $3a2eb4aa4a7e4dba$export$cb0dffe2d2ae675a)($bb3973b59a235a1d$export$bc90872e265d166e)].children[(0, $3a2eb4aa4a7e4dba$export$cb0dffe2d2ae675a)($bb3973b59a235a1d$export$bc90872e265d166e)];\n    const value = Math.random() < 0.1 ? 4 : 2;\n    if (randomCell.textContent) $bb3973b59a235a1d$export$f83aa6f92f268972();\n    else $bb3973b59a235a1d$export$4c9cc8a8bb2b3fc2(randomCell, value);\n};\nconst $bb3973b59a235a1d$export$69d6128043c4eb18 = (targetedButton, newButtonLabel)=>{\n    $bb3973b59a235a1d$var$removeModifierClass(targetedButton);\n    targetedButton.classList.add(newButtonLabel.toLowerCase());\n    targetedButton.textContent = newButtonLabel;\n};\nconst $bb3973b59a235a1d$export$96220cb1be7aea39 = (newCells)=>{\n    [\n        ...(0, $ac43a74d429af77f$export$2dd197b55cf13440)\n    ].forEach((row, i)=>{\n        row.innerHTML = \"\";\n        row.append(...newCells[i]);\n    });\n    $bb3973b59a235a1d$export$f83aa6f92f268972();\n};\n\n\n\n\n\n\nconst $0b00cabf6d7057b8$var$mergeCells = (cellsArray)=>{\n    const mergedCells = [];\n    for(let i = 0; i < cellsArray.length;){\n        const currCell = cellsArray[i];\n        const nextCell = cellsArray[i + 1];\n        if (nextCell && currCell.isEqualNode(nextCell)) {\n            (0, $bb3973b59a235a1d$export$4c9cc8a8bb2b3fc2)(currCell, +currCell.textContent * 2);\n            i++;\n        }\n        i++;\n        mergedCells.push(currCell);\n    }\n    return mergedCells;\n};\nconst $0b00cabf6d7057b8$var$getNewCells = (cellsGroup, reversed)=>cellsGroup.map((group)=>{\n        const cleanedCellsGroup = group.filter((cell)=>cell.textContent && cell);\n        const mergedCellsGroup = $0b00cabf6d7057b8$var$mergeCells(cleanedCellsGroup);\n        const emptyCellsGroup = Array.from({\n            length: (0, $bb3973b59a235a1d$export$bc90872e265d166e) - mergedCellsGroup.length\n        }, ()=>(0, $bb3973b59a235a1d$export$d8dd757b458444ef)());\n        if (reversed) return emptyCellsGroup.concat(mergedCellsGroup);\n        return mergedCellsGroup.concat(emptyCellsGroup);\n    });\nconst $0b00cabf6d7057b8$var$slideCellsHorizontal = (cellsGroup, reversed)=>{\n    const newRowCells = $0b00cabf6d7057b8$var$getNewCells(cellsGroup, reversed);\n    if ((0, $3a2eb4aa4a7e4dba$export$bca45dff2862a24)((0, $ac43a74d429af77f$export$57ba6370ea0e47f8), newRowCells)) (0, $bb3973b59a235a1d$export$96220cb1be7aea39)(newRowCells);\n};\nconst $0b00cabf6d7057b8$var$slideCellsVertical = (cellsGroup, reversed)=>{\n    const newColumnCells = $0b00cabf6d7057b8$var$getNewCells(cellsGroup, reversed);\n    const newColumnCellsToRow = (0, $3a2eb4aa4a7e4dba$export$5bb0c5338e04ae49)(newColumnCells.flat(), true);\n    if ((0, $3a2eb4aa4a7e4dba$export$bca45dff2862a24)((0, $ac43a74d429af77f$export$57ba6370ea0e47f8), newColumnCellsToRow)) (0, $bb3973b59a235a1d$export$96220cb1be7aea39)(newColumnCellsToRow);\n};\nconst $0b00cabf6d7057b8$export$44935f8a884b57b9 = ()=>{\n    $0b00cabf6d7057b8$var$slideCellsVertical((0, $3a2eb4aa4a7e4dba$export$978e30a0fb8610d8)((0, $ac43a74d429af77f$export$57ba6370ea0e47f8)));\n};\nconst $0b00cabf6d7057b8$export$8eba228b343b3599 = ()=>{\n    $0b00cabf6d7057b8$var$slideCellsVertical((0, $3a2eb4aa4a7e4dba$export$978e30a0fb8610d8)((0, $ac43a74d429af77f$export$57ba6370ea0e47f8)), true);\n};\nconst $0b00cabf6d7057b8$export$108f27160c89e515 = ()=>{\n    $0b00cabf6d7057b8$var$slideCellsHorizontal((0, $3a2eb4aa4a7e4dba$export$e7a6db342d2fdde5)((0, $ac43a74d429af77f$export$57ba6370ea0e47f8)));\n};\nconst $0b00cabf6d7057b8$export$e2c874fbfec7201 = ()=>{\n    $0b00cabf6d7057b8$var$slideCellsHorizontal((0, $3a2eb4aa4a7e4dba$export$e7a6db342d2fdde5)((0, $ac43a74d429af77f$export$57ba6370ea0e47f8)), true);\n};\n\n\nconst $ac43a74d429af77f$export$2dd197b55cf13440 = document.getElementsByClassName(\"field-row\");\nconst $ac43a74d429af77f$export$57ba6370ea0e47f8 = document.getElementsByClassName(\"field-cell\");\nconst $ac43a74d429af77f$var$button = document.querySelector(\".button\");\nconst $ac43a74d429af77f$var$message = document.querySelectorAll(\".message\");\nconst $ac43a74d429af77f$var$score = document.querySelector(\".game-score\");\nlet $ac43a74d429af77f$var$isPlaying = false;\nconst $ac43a74d429af77f$var$resetTheGame = ()=>{\n    $ac43a74d429af77f$var$button.removeEventListener(\"click\", $ac43a74d429af77f$var$resetTheGame);\n    (0, $bb3973b59a235a1d$export$492548937fe95318)();\n    $ac43a74d429af77f$var$score.textContent = 0;\n    (0, $bb3973b59a235a1d$export$69d6128043c4eb18)($ac43a74d429af77f$var$button, \"Start\");\n    $ac43a74d429af77f$var$message[0].classList.add(\"hidden\");\n    $ac43a74d429af77f$var$message[1].classList.add(\"hidden\");\n    $ac43a74d429af77f$var$message[2].classList.remove(\"hidden\");\n    $ac43a74d429af77f$var$button.addEventListener(\"click\", $ac43a74d429af77f$var$startTheGame);\n    $ac43a74d429af77f$var$isPlaying = false;\n};\nconst $ac43a74d429af77f$var$startTheGame = ()=>{\n    $ac43a74d429af77f$var$button.removeEventListener(\"click\", $ac43a74d429af77f$var$startTheGame);\n    (0, $bb3973b59a235a1d$export$f83aa6f92f268972)();\n    (0, $bb3973b59a235a1d$export$69d6128043c4eb18)($ac43a74d429af77f$var$button, \"Restart\");\n    $ac43a74d429af77f$var$button.addEventListener(\"click\", $ac43a74d429af77f$var$resetTheGame);\n    $ac43a74d429af77f$var$message[2].classList.add(\"hidden\");\n    $ac43a74d429af77f$var$isPlaying = true;\n};\n$ac43a74d429af77f$var$button.addEventListener(\"click\", $ac43a74d429af77f$var$startTheGame);\ndocument.addEventListener(\"keydown\", (e)=>{\n    if (!$ac43a74d429af77f$var$isPlaying) return;\n    if ((0, $3a2eb4aa4a7e4dba$export$9f1c65284a10fd65)($ac43a74d429af77f$export$57ba6370ea0e47f8)) {\n        $ac43a74d429af77f$var$message[0].classList.remove(\"hidden\");\n        $ac43a74d429af77f$var$isPlaying = false;\n        return;\n    }\n    switch(e.key){\n        case \"ArrowUp\":\n            (0, $0b00cabf6d7057b8$export$44935f8a884b57b9)();\n            break;\n        case \"ArrowDown\":\n            (0, $0b00cabf6d7057b8$export$8eba228b343b3599)();\n            break;\n        case \"ArrowLeft\":\n            (0, $0b00cabf6d7057b8$export$108f27160c89e515)();\n            break;\n        case \"ArrowRight\":\n            (0, $0b00cabf6d7057b8$export$e2c874fbfec7201)();\n            break;\n        default:\n            break;\n    }\n    $ac43a74d429af77f$var$score.textContent = (0, $3a2eb4aa4a7e4dba$export$c5f308e28dbb0701)($ac43a74d429af77f$export$57ba6370ea0e47f8);\n    if ((0, $3a2eb4aa4a7e4dba$export$1ab4082fb43308c8)($ac43a74d429af77f$export$57ba6370ea0e47f8)) {\n        $ac43a74d429af77f$var$message[1].classList.remove(\"hidden\");\n        $ac43a74d429af77f$var$isPlaying = false;\n    }\n});\n// MOBILE - SWIPE\nconst $ac43a74d429af77f$var$swipeArea = document.querySelector(\".game-field\");\nlet $ac43a74d429af77f$var$touchStartX = 0;\nlet $ac43a74d429af77f$var$touchStartY = 0;\nlet $ac43a74d429af77f$var$touchEndX = 0;\nlet $ac43a74d429af77f$var$touchEndY = 0;\n$ac43a74d429af77f$var$swipeArea.addEventListener(\"touchstart\", (event)=>{\n    event.preventDefault();\n    $ac43a74d429af77f$var$touchStartX = event.touches[0].clientX;\n    $ac43a74d429af77f$var$touchStartY = event.touches[0].clientY;\n});\n$ac43a74d429af77f$var$swipeArea.addEventListener(\"touchend\", (event)=>{\n    $ac43a74d429af77f$var$touchEndX = event.changedTouches[0].clientX;\n    $ac43a74d429af77f$var$touchEndY = event.changedTouches[0].clientY;\n    $ac43a74d429af77f$var$handleSwipe();\n});\nfunction $ac43a74d429af77f$var$handleSwipe() {\n    if (!$ac43a74d429af77f$var$isPlaying) return;\n    if ((0, $3a2eb4aa4a7e4dba$export$9f1c65284a10fd65)($ac43a74d429af77f$export$57ba6370ea0e47f8)) {\n        $ac43a74d429af77f$var$message[0].classList.remove(\"hidden\");\n        $ac43a74d429af77f$var$isPlaying = false;\n        return;\n    }\n    const swipeDistanceX = $ac43a74d429af77f$var$touchEndX - $ac43a74d429af77f$var$touchStartX;\n    const swipeDistanceY = $ac43a74d429af77f$var$touchEndY - $ac43a74d429af77f$var$touchStartY;\n    const minSwipeDistance = 25;\n    const isHorizontalSwipe = Math.abs(swipeDistanceX) > Math.abs(swipeDistanceY);\n    if (isHorizontalSwipe) {\n        const isRightSwipe = swipeDistanceX > minSwipeDistance;\n        const isLeftSwipe = swipeDistanceX < -minSwipeDistance;\n        if (isRightSwipe) (0, $0b00cabf6d7057b8$export$e2c874fbfec7201)();\n        else if (isLeftSwipe) (0, $0b00cabf6d7057b8$export$108f27160c89e515)();\n    } else {\n        const isDownSwipe = swipeDistanceY > minSwipeDistance;\n        const isUpSwipe = swipeDistanceY < -minSwipeDistance;\n        if (isDownSwipe) (0, $0b00cabf6d7057b8$export$8eba228b343b3599)();\n        else if (isUpSwipe) (0, $0b00cabf6d7057b8$export$44935f8a884b57b9)();\n    }\n    $ac43a74d429af77f$var$score.textContent = (0, $3a2eb4aa4a7e4dba$export$c5f308e28dbb0701)($ac43a74d429af77f$export$57ba6370ea0e47f8);\n    if ((0, $3a2eb4aa4a7e4dba$export$1ab4082fb43308c8)($ac43a74d429af77f$export$57ba6370ea0e47f8)) {\n        $ac43a74d429af77f$var$message[1].classList.remove(\"hidden\");\n        $ac43a74d429af77f$var$isPlaying = false;\n    }\n}\n\n\n//# sourceMappingURL=index.4441b060.js.map\n","import { addRandomCell, clearCells, handleButtonChange } from \"./domFunctions\";\nimport { getTotalPoints, isGameOver, isWin } from \"./helpers\";\nimport { moveUp, moveDown, moveLeft, moveRight } from \"./moveFunctions\";\n\nexport const rows = document.getElementsByClassName(\"field-row\");\nexport const cells = document.getElementsByClassName(\"field-cell\");\n\nconst button = document.querySelector(\".button\");\nconst message = document.querySelectorAll(\".message\");\nconst score = document.querySelector(\".game-score\");\n\nlet isPlaying = false;\n\nconst resetTheGame = () => {\n  button.removeEventListener(\"click\", resetTheGame);\n\n  clearCells();\n  score.textContent = 0;\n  handleButtonChange(button, \"Start\");\n  message[0].classList.add(\"hidden\");\n  message[1].classList.add(\"hidden\");\n  message[2].classList.remove(\"hidden\");\n  button.addEventListener(\"click\", startTheGame);\n\n  isPlaying = false;\n};\n\nconst startTheGame = () => {\n  button.removeEventListener(\"click\", startTheGame);\n\n  addRandomCell();\n  handleButtonChange(button, \"Restart\");\n  button.addEventListener(\"click\", resetTheGame);\n  message[2].classList.add(\"hidden\");\n\n  isPlaying = true;\n};\n\nbutton.addEventListener(\"click\", startTheGame);\n\ndocument.addEventListener(\"keydown\", (e) => {\n  if (!isPlaying) {\n    return;\n  }\n\n  if (isGameOver(cells)) {\n    message[0].classList.remove(\"hidden\");\n    isPlaying = false;\n\n    return;\n  }\n\n  switch (e.key) {\n    case \"ArrowUp\":\n      moveUp();\n      break;\n    case \"ArrowDown\":\n      moveDown();\n      break;\n    case \"ArrowLeft\":\n      moveLeft();\n      break;\n    case \"ArrowRight\":\n      moveRight();\n      break;\n    default:\n      break;\n  }\n\n  score.textContent = getTotalPoints(cells);\n\n  if (isWin(cells)) {\n    message[1].classList.remove(\"hidden\");\n    isPlaying = false;\n  }\n});\n\n// MOBILE - SWIPE\n\nconst swipeArea = document.querySelector(\".game-field\");\nlet touchStartX = 0;\nlet touchStartY = 0;\nlet touchEndX = 0;\nlet touchEndY = 0;\n\nswipeArea.addEventListener(\"touchstart\", (event) => {\n  event.preventDefault();\n  touchStartX = event.touches[0].clientX;\n  touchStartY = event.touches[0].clientY;\n});\n\nswipeArea.addEventListener(\"touchend\", (event) => {\n  touchEndX = event.changedTouches[0].clientX;\n  touchEndY = event.changedTouches[0].clientY;\n  handleSwipe();\n});\n\nfunction handleSwipe() {\n  if (!isPlaying) {\n    return;\n  }\n\n  if (isGameOver(cells)) {\n    message[0].classList.remove(\"hidden\");\n    isPlaying = false;\n\n    return;\n  }\n\n  const swipeDistanceX = touchEndX - touchStartX;\n  const swipeDistanceY = touchEndY - touchStartY;\n  const minSwipeDistance = 25;\n  const isHorizontalSwipe = Math.abs(swipeDistanceX) > Math.abs(swipeDistanceY);\n\n  if (isHorizontalSwipe) {\n    const isRightSwipe = swipeDistanceX > minSwipeDistance;\n    const isLeftSwipe = swipeDistanceX < -minSwipeDistance;\n\n    if (isRightSwipe) {\n      moveRight();\n    } else if (isLeftSwipe) {\n      moveLeft();\n    }\n  } else {\n    const isDownSwipe = swipeDistanceY > minSwipeDistance;\n    const isUpSwipe = swipeDistanceY < -minSwipeDistance;\n\n    if (isDownSwipe) {\n      moveDown();\n    } else if (isUpSwipe) {\n      moveUp();\n    }\n  }\n\n  score.textContent = getTotalPoints(cells);\n\n  if (isWin(cells)) {\n    message[1].classList.remove(\"hidden\");\n    isPlaying = false;\n  }\n}\n","import { getRandomIndex } from './helpers';\r\nimport { rows, cells } from './main';\r\n\r\nexport const GRID_SIZE = 4;\r\n\r\nconst removeModifierClass = (domNode) => {\r\n  const classModifier = domNode.classList.item(1);\r\n\r\n  if (classModifier) {\r\n    domNode.classList.remove(classModifier);\r\n  }\r\n};\r\n\r\nexport const fillCell = (cell, value) => {\r\n  removeModifierClass(cell);\r\n\r\n  cell.textContent = value;\r\n  cell.classList.add(`field-cell--${value}`);\r\n};\r\n\r\nexport const clearCells = () => {\r\n  [...cells].forEach((cell) => {\r\n    cell.textContent = null;\r\n    removeModifierClass(cell);\r\n  });\r\n};\r\n\r\nexport const createEmptyCell = () => {\r\n  const cell = document.createElement('td');\r\n\r\n  cell.classList.add('field-cell');\r\n\r\n  return cell;\r\n};\r\n\r\nexport const addRandomCell = () => {\r\n  const randomCell\r\n    = rows[getRandomIndex(GRID_SIZE)].children[getRandomIndex(GRID_SIZE)];\r\n  const value = Math.random() < 0.1 ? 4 : 2;\r\n\r\n  if (randomCell.textContent) {\r\n    addRandomCell();\r\n  } else {\r\n    fillCell(randomCell, value);\r\n  }\r\n};\r\n\r\nexport const handleButtonChange = (targetedButton, newButtonLabel) => {\r\n  removeModifierClass(targetedButton);\r\n\r\n  targetedButton.classList.add(newButtonLabel.toLowerCase());\r\n  targetedButton.textContent = newButtonLabel;\r\n};\r\n\r\nexport const updateBoard = (newCells) => {\r\n  [...rows].forEach((row, i) => {\r\n    row.innerHTML = '';\r\n    row.append(...newCells[i]);\r\n  });\r\n\r\n  addRandomCell();\r\n};\r\n","export const getRandomIndex = (gridSize) =>\n  Math.floor(Math.random() * gridSize);\n\nexport const getSelectedAxis = (array, y) =>\n  array.reduce(\n    (acc, curr, i) => {\n      acc[Math.floor(y ? i % acc.length : i / acc.length)].push(curr);\n\n      return acc;\n    },\n    [[], [], [], []]\n  );\n\nexport const getColumns = (cells) => {\n  return getSelectedAxis([...cells], true);\n};\n\nexport const getRows = (cells) => {\n  return getSelectedAxis([...cells]);\n};\n\nexport const getTotalPoints = (cells) =>\n  [...cells].reduce(\n    (acc, curr) => (+curr.textContent > 2 ? acc + +curr.textContent : acc + 0),\n    0\n  );\n\nexport const isCellsEqual = (currentCells, newCells) =>\n  [...currentCells].some((cell, i) => !cell.isEqualNode(newCells.flat()[i]));\n\nexport const hasEmptyCell = (cells) =>\n  [...cells].some((cell) => cell.textContent === \"\");\n\nconst isMergePossible = (cells) => {\n  const rowsAndColumns = [...getRows(cells), ...getColumns(cells)];\n\n  for (const subArr of rowsAndColumns) {\n    for (let i = 0; i < subArr.length; i++) {\n      if (subArr[i].isEqualNode(subArr[i + 1])) {\n        return true;\n      }\n    }\n  }\n};\n\nexport const isGameOver = (cells) => {\n  if (!hasEmptyCell(cells)) {\n    return !isMergePossible(cells);\n  }\n\n  return false;\n};\n\nexport const isWin = (cells) =>\n  [...cells].some((cell) => +cell.textContent === 2048);\n","import { getSelectedAxis, isCellsEqual, getColumns, getRows } from \"./helpers\";\nimport {\n  createEmptyCell,\n  fillCell,\n  updateBoard,\n  GRID_SIZE,\n} from \"./domFunctions\";\nimport { cells } from \"./main\";\n\nconst mergeCells = (cellsArray) => {\n  const mergedCells = [];\n\n  for (let i = 0; i < cellsArray.length; ) {\n    const currCell = cellsArray[i];\n    const nextCell = cellsArray[i + 1];\n\n    if (nextCell && currCell.isEqualNode(nextCell)) {\n      fillCell(currCell, +currCell.textContent * 2);\n      i++;\n    }\n    i++;\n\n    mergedCells.push(currCell);\n  }\n\n  return mergedCells;\n};\n\nconst getNewCells = (cellsGroup, reversed) =>\n  cellsGroup.map((group) => {\n    const cleanedCellsGroup = group.filter((cell) => cell.textContent && cell);\n    const mergedCellsGroup = mergeCells(cleanedCellsGroup);\n\n    const emptyCellsGroup = Array.from(\n      { length: GRID_SIZE - mergedCellsGroup.length },\n      () => createEmptyCell()\n    );\n\n    if (reversed) {\n      return emptyCellsGroup.concat(mergedCellsGroup);\n    }\n\n    return mergedCellsGroup.concat(emptyCellsGroup);\n  });\n\nconst slideCellsHorizontal = (cellsGroup, reversed) => {\n  const newRowCells = getNewCells(cellsGroup, reversed);\n\n  if (isCellsEqual(cells, newRowCells)) {\n    updateBoard(newRowCells);\n  }\n};\n\nconst slideCellsVertical = (cellsGroup, reversed) => {\n  const newColumnCells = getNewCells(cellsGroup, reversed);\n  const newColumnCellsToRow = getSelectedAxis(newColumnCells.flat(), true);\n\n  if (isCellsEqual(cells, newColumnCellsToRow)) {\n    updateBoard(newColumnCellsToRow);\n  }\n};\n\nexport const moveUp = () => {\n  slideCellsVertical(getColumns(cells));\n};\n\nexport const moveDown = () => {\n  slideCellsVertical(getColumns(cells), true);\n};\n\nexport const moveLeft = () => {\n  slideCellsHorizontal(getRows(cells));\n};\n\nexport const moveRight = () => {\n  slideCellsHorizontal(getRows(cells), true);\n};\n"],"names":["$3a2eb4aa4a7e4dba$export$cb0dffe2d2ae675a","gridSize","Math","floor","random","$3a2eb4aa4a7e4dba$export$5bb0c5338e04ae49","array","y","reduce","acc","curr","i","length","push","$3a2eb4aa4a7e4dba$export$978e30a0fb8610d8","cells","$3a2eb4aa4a7e4dba$export$e7a6db342d2fdde5","$3a2eb4aa4a7e4dba$export$c5f308e28dbb0701","textContent","$3a2eb4aa4a7e4dba$export$bca45dff2862a24","currentCells","newCells","some","cell","isEqualNode","flat","$3a2eb4aa4a7e4dba$export$eafad6f4e37c0fbb","$3a2eb4aa4a7e4dba$var$isMergePossible","subArr","$3a2eb4aa4a7e4dba$export$9f1c65284a10fd65","$3a2eb4aa4a7e4dba$export$1ab4082fb43308c8","$bb3973b59a235a1d$var$removeModifierClass","domNode","classModifier","classList","item","remove","$bb3973b59a235a1d$export$4c9cc8a8bb2b3fc2","value","add","$bb3973b59a235a1d$export$492548937fe95318","$ac43a74d429af77f$export$57ba6370ea0e47f8","forEach","$bb3973b59a235a1d$export$d8dd757b458444ef","document","createElement","$bb3973b59a235a1d$export$f83aa6f92f268972","randomCell","$ac43a74d429af77f$export$2dd197b55cf13440","children","$bb3973b59a235a1d$export$69d6128043c4eb18","targetedButton","newButtonLabel","toLowerCase","$bb3973b59a235a1d$export$96220cb1be7aea39","row","innerHTML","append","$0b00cabf6d7057b8$var$mergeCells","cellsArray","mergedCells","currCell","nextCell","$0b00cabf6d7057b8$var$getNewCells","cellsGroup","reversed","map","group","mergedCellsGroup","filter","emptyCellsGroup","Array","from","concat","$0b00cabf6d7057b8$var$slideCellsHorizontal","newRowCells","$0b00cabf6d7057b8$var$slideCellsVertical","newColumnCellsToRow","newColumnCells","$0b00cabf6d7057b8$export$44935f8a884b57b9","$0b00cabf6d7057b8$export$8eba228b343b3599","$0b00cabf6d7057b8$export$108f27160c89e515","$0b00cabf6d7057b8$export$e2c874fbfec7201","getElementsByClassName","$ac43a74d429af77f$var$button","querySelector","$ac43a74d429af77f$var$message","querySelectorAll","$ac43a74d429af77f$var$score","$ac43a74d429af77f$var$isPlaying","$ac43a74d429af77f$var$resetTheGame","removeEventListener","addEventListener","$ac43a74d429af77f$var$startTheGame","e","key","$ac43a74d429af77f$var$swipeArea","$ac43a74d429af77f$var$touchStartX","$ac43a74d429af77f$var$touchStartY","$ac43a74d429af77f$var$touchEndX","$ac43a74d429af77f$var$touchEndY","event","preventDefault","touches","clientX","clientY","changedTouches","$ac43a74d429af77f$var$handleSwipe","swipeDistanceX","swipeDistanceY","abs"],"version":3,"file":"index.4441b060.js.map"}